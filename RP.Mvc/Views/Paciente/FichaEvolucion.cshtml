

@using RP.Mvc.Models;
@{
    ViewBag.Title = "Ficha de evolución";
}
<h2>&nbsp;</h2>
<ol class="breadcrumb">
    <li><a href="#">Home</a></li>
    <li><a href="#">Paciente</a></li>
    <li class="active">@ViewBag.Title</li>
</ol>

<h2>@ViewBag.Title</h2>
<p>Desde este módulo puede registrar la evolución del paciente</p>

<div class="row">
    <div class="col-lg-4">
        <div class="panel panel-primary">
            <div class="panel-heading">
                <i class="fa fa-bar-chart-o fa-fw"></i> Paciente
            </div>
            <div class="panel-body">


                <div class="col-md-12">
                    <h4 id="nombrePaciente"></h4>

                </div>
                <div class="col-md-12"><hr /></div>
                <div class="col-md-6">
                    <p>Historia Clínica</p>
                </div>
                <div class="col-md-6">
                    <p id="historiaPaciente"></p>
                </div>
                <div class="col-md-6">
                    <p>Fec. Nacimiento</p>
                </div>
                <div class="col-md-6">
                    <p id="fechaNacimiento"></p>
                </div>
                <div class="col-md-6">
                    <p>Edad</p>
                </div>
                <div class="col-md-6">
                    <p id="edadPaciente"></p>
                </div>
                <div class="col-md-6">
                    <p>Nro. de Telefono</p>
                </div>
                <div class="col-md-6">
                    <p id="nroTelefonoPaciente"></p>
                </div>
                <div class="col-md-6">
                    <p>Email</p>
                </div>
                <div class="col-md-6">
                    <p id="emailPaciente"></p>
                </div>


            </div>
        </div>

        <div class="panel panel-primary">
            <div class="panel-heading">
                <i class="fa fa-bar-chart-o fa-fw"></i> Diagnóstico
            </div>
            <div class="panel-body">

                <div class="col-md-12">
                    <select class="form-control input-sm">
                        <option>S52-5 - Fractura de muñeca</option>
                    </select>
                </div>
                <div class="row-fluid">&nbsp;</div>
                    <div class="col-md-4">
                        <p>Fecha</p>
                    </div>
                    <div class="col-md-8">
                        <p>01/01/2017</p>
                    </div>
                    <div class="col-md-4">
                        <p>Médico</p>
                    </div>
                    <div class="col-md-8">
                        <p>Mark Otto</p>
                    </div>

                    <div class="col-md-4">
                        <p>Detalle</p>
                    </div>
                    <div class="col-md-8">
                        <p>Detalle del diagnóstico</p>
                    </div>

            </div>
        </div>
        <div class="panel panel-primary">
            <div class="panel-heading">
                <i class="fa fa-bar-chart-o fa-fw"></i> Progreso
            </div>
            <div class="panel-body">


                <div class="col-md-4">
                    <p>Programadas</p>
                </div>

                <div class="col-md-4">
                    <p>Atendidas</p>
                </div>

                <div class="col-md-4">
                    <p>Pendientes</p>
                </div>




                <div class="col-md-4">
                    <p>12</p>
                </div>
                <div class="col-md-4">
                    <p>3</p>
                </div>
                <div class="col-md-4">
                    <p>9</p>
                </div>


                <div class="col-md-12">
                    <div class="box-content">
                        <div id="facebookChart" style="height: 300px; padding: 0px; position: relative;"><canvas class="flot-base" style="direction: ltr; position: absolute; left: 0px; top: 0px; width: 424px; height: 300px;" width="424" height="300"></canvas><div class="flot-text" style="position: absolute; top: 0px; left: 0px; bottom: 0px; right: 0px; font-size: smaller; color: rgb(84, 84, 84);"><div class="flot-x-axis flot-x1-axis xAxis x1Axis" style="position: absolute; top: 0px; left: 0px; bottom: 0px; right: 0px; display: block;"><div class="flot-tick-label tickLabel" style="position: absolute; max-width: 107px; top: 284px; left: 88px; text-align: center;">5</div><div class="flot-tick-label tickLabel" style="position: absolute; max-width: 107px; top: 284px; left: 149px; text-align: center;">10</div><div class="flot-tick-label tickLabel" style="position: absolute; max-width: 107px; top: 284px; left: 214px; text-align: center;">15</div><div class="flot-tick-label tickLabel" style="position: absolute; max-width: 107px; top: 284px; left: 279px; text-align: center;">20</div><div class="flot-tick-label tickLabel" style="position: absolute; max-width: 107px; top: 284px; left: 344px; text-align: center;">25</div><div class="flot-tick-label tickLabel" style="position: absolute; max-width: 107px; top: 284px; left: 409px; text-align: center;">30</div></div><div class="flot-y-axis flot-y1-axis yAxis y1Axis" style="position: absolute; top: 0px; left: 0px; bottom: 0px; right: 0px; display: block;"><div class="flot-tick-label tickLabel" style="position: absolute; top: 271px; left: 27px; text-align: right;">0</div><div class="flot-tick-label tickLabel" style="position: absolute; top: 181px; left: 0px; text-align: right;">20000</div><div class="flot-tick-label tickLabel" style="position: absolute; top: 90px; left: 0px; text-align: right;">40000</div><div class="flot-tick-label tickLabel" style="position: absolute; top: 0px; left: 0px; text-align: right;">60000</div></div></div><canvas class="flot-overlay" style="direction: ltr; position: absolute; left: 0px; top: 0px; width: 424px; height: 300px;" width="424" height="300"></canvas><div class="legend"><div style="position: absolute; width: 39px; height: 16px; top: 13px; right: 13px; background-color: rgb(255, 255, 255); opacity: 0.85;"> </div><table style="position:absolute;top:13px;right:13px;;font-size:smaller;color:#545454"><tbody><tr><td class="legendColorBox"><div style="border:1px solid #ccc;padding:1px"><div style="width:4px;height:0;border:5px solid rgb(59,89,152);overflow:hidden"></div></div></td><td class="legendLabel">Fans</td></tr></tbody></table></div></div>
                    </div>

                </div>
                </div>
            
        </div>
    </div>



    <div class="col-lg-8">
        <div class="panel panel-primary">
            <div class="panel-heading">
                <i class="fa fa-bar-chart-o fa-fw"></i> Registro de evolución
            </div>
            <div class="panel-body">
                <div class="row">

                    <div class="col-md-2">
                        <p># Sesión</p>
                    </div>
                    <div class="col-md-2">
                        <p>4</p>
                    </div>
                    <div class="col-md-2">
                        <p>Fecha programada</p>
                    </div>
                    <div class="col-md-2">
                        <p>01/01/2017</p>
                    </div>

                    <div class="col-md-2">
                        <p>Hora</p>
                    </div>
                    <div class="col-md-2">
                        <p>10:00</p>
                    </div>

                </div>
                <hr/>

                <div class="row">

                    <div class="col-md-2">
                        <p>Terapista</p>
                    </div>
                    <div class="col-md-10">
                        <p>Kevin Rodbae Kratos</p>
                    </div>
                    <div class="col-md-4">
                        <p>Fecha programada</p>
                    </div>
                    <div class="col-md-8">
                        <p>01/01/2017</p>
                    </div>
                    <div class="col-md-4">
                        <p>Grado de satisfacción del paciente</p>
                    </div>
                    <div class="col-md-8">
                        <p><select><option>Satisfecho</option><option>Medianamente Satisfecho</option><option>Insatisfecho</option></select></p>
                    </div>
                    <div class="col-md-12">
                        <p>Observaciones</p>
                    </div>
                    <div class="col-md-12 col-sm-12 col-xs-12">
                        <textarea class="form-control" style="min-width: 100%" maxlength="500" id="tratamiento" rows="2"></textarea>
                    </div>
                    <div class="col-md-12">
                        <p>Recomendaciones</p>
                    </div>
                    <div class="col-md-12 col-sm-12 col-xs-12">
                        <textarea class="form-control" style="min-width: 100%" maxlength="1500" id="tratamiento" rows="2"></textarea>
                    </div>
                </div>

                <br/>
                <div >
                    <button type="button" class="btn btn-primary btn-xs">Registrar resultado de sesión</button>
                </div>
            </div>
        </div>


        <div class="panel panel-success">
            <div class="panel-body">
                <div class="row">
                    <div class="col-md-3 col-sm-3 col-xs-12 form-group">
                        <label><strong>Terapista</strong></label>
                    </div>
                    <div class="col-md-3 col-sm-3 col-xs-12 form-group">
                        <span>Kevin Rodbae Kratos</span>
                    </div>

                    <div class="col-md-3 col-sm-3 col-xs-12 form-group">
                        <label><strong># de sesión</strong></label>
                    </div>
                    <div class="col-md-3 col-sm-3 col-xs-12 form-group">
                        <span>3</span>
                    </div>

                </div>

                <div class="row">
                    <div class="col-md-3 col-sm-3 col-xs-12 form-group">
                        <label><strong>Aplicaciones</strong></label>
                    </div>
                    <div class="col-md-3 col-sm-3 col-xs-12 form-group">
                        <span>Magneto / Masajes / Radioterapia</span>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-3 col-sm-3 col-xs-12 form-group">
                        <label><strong>Puntaje Obtenido</strong></label>
                    </div>
                    <div class="col-md-3 col-sm-3 col-xs-12 form-group">
                        <span>4</span>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-3 col-sm-3 col-xs-12 form-group">
                        <label><strong>Observaciones</strong></label>
                    </div>
                    <div class="col-md-9 col-sm-9 col-xs-12 form-group">
                        <span>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s</span>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-3 col-sm-3 col-xs-12 form-group">
                        <label><strong>Recomendaciones</strong></label>
                    </div>
                    <div class="col-md-9 col-sm-9 col-xs-12 form-group">
                        <span>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s</span>
                    </div>
                </div>

            </div>
        </div>


        <div class="panel panel-warning">
            <div class="panel-body">
                <div class="row">
                    <div class="col-md-3 col-sm-3 col-xs-12 form-group">
                        <label><strong>Terapista</strong></label>
                    </div>
                    <div class="col-md-3 col-sm-3 col-xs-12 form-group">
                        <span>Kevin Rodbae Kratos</span>
                    </div>

                    <div class="col-md-3 col-sm-3 col-xs-12 form-group">
                        <label><strong># de sesión</strong></label>
                    </div>
                    <div class="col-md-3 col-sm-3 col-xs-12 form-group">
                        <span>2</span>
                    </div>

                </div>

                <div class="row">
                    <div class="col-md-3 col-sm-3 col-xs-12 form-group">
                        <label><strong>Aplicaciones</strong></label>
                    </div>
                    <div class="col-md-3 col-sm-3 col-xs-12 form-group">
                        <span>Magneto / Masajes / Radioterapia</span>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-3 col-sm-3 col-xs-12 form-group">
                        <label><strong>Puntaje Obtenido</strong></label>
                    </div>
                    <div class="col-md-3 col-sm-3 col-xs-12 form-group">
                        <span>4</span>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-3 col-sm-3 col-xs-12 form-group">
                        <label><strong>Observaciones</strong></label>
                    </div>
                    <div class="col-md-9 col-sm-9 col-xs-12 form-group">
                        <span>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s</span>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-3 col-sm-3 col-xs-12 form-group">
                        <label><strong>Recomendaciones</strong></label>
                    </div>
                    <div class="col-md-9 col-sm-9 col-xs-12 form-group">
                        <span>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s</span>
                    </div>
                </div>

            </div>
        </div>

        <div class="panel panel-danger">
            <div class="panel-body">
                <div class="row">
                    <div class="col-md-3 col-sm-3 col-xs-12 form-group">
                        <label><strong>Terapista</strong></label>
                    </div>
                    <div class="col-md-3 col-sm-3 col-xs-12 form-group">
                        <span>Kevin Rodbae Kratos</span>
                    </div>

                    <div class="col-md-3 col-sm-3 col-xs-12 form-group">
                        <label><strong># de sesión</strong></label>
                    </div>
                    <div class="col-md-3 col-sm-3 col-xs-12 form-group">
                        <span>1</span>
                    </div>

                </div>

                <div class="row">
                    <div class="col-md-3 col-sm-3 col-xs-12 form-group">
                        <label><strong>Aplicaciones</strong></label>
                    </div>
                    <div class="col-md-3 col-sm-3 col-xs-12 form-group">
                        <span>Magneto / Masajes / Radioterapia</span>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-3 col-sm-3 col-xs-12 form-group">
                        <label><strong>Puntaje Obtenido</strong></label>
                    </div>
                    <div class="col-md-3 col-sm-3 col-xs-12 form-group">
                        <span>4</span>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-3 col-sm-3 col-xs-12 form-group">
                        <label><strong>Observaciones</strong></label>
                    </div>
                    <div class="col-md-9 col-sm-9 col-xs-12 form-group">
                        <span>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s</span>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-3 col-sm-3 col-xs-12 form-group">
                        <label><strong>Recomendaciones</strong></label>
                    </div>
                    <div class="col-md-9 col-sm-9 col-xs-12 form-group">
                        <span>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s</span>
                    </div>
                </div>

            </div>
        </div>
    </div>
</div>
@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")


    <script type="text/javascript">
        
        var apiURL = "http://localhost:53229/api/";

        $(document).ready(function () {
            $('.date-session').datepicker({
                weekStart: 1,
                format: 'dd/mm/yyyy',
                autoclose: true
            }).on('changeDate', function (selected) {
                date = new Date(selected.date.valueOf());
                var objetoSelectHora = $(this).parent().parent().find(".select-hora");
                var fecha = formatoFecha(date);
                //cargarHoras(objetoSelectHora, fecha);
                fechaSeleccionada = fecha;
            });
        });

        Number.prototype.padLeft = function (base, chr) {
            var len = (String(base || 10).length - String(this).length) + 1;
            return len > 0 ? new Array(len).join(chr || '0') + this : this;
        }

        function formatoFecha(d) {
            dformat = [(d.getMonth() + 1).padLeft(),
                d.getDate().padLeft(),
                d.getFullYear()].join('-');
            return dformat;
        }


        var numDoc = 45858596;
        var idPaciente = 1;

        function obtenerPaciente(numDoc) {
            var urlBuscarPaciente = apiURL + "paciente/buscar/1/" + numDoc;
            $.ajax({
                url: urlBuscarPaciente,
                success: function (data) {
                    if (data == null) {
                        return;
                    }
                    $("#nombrePaciente").text(data.NOMBRE);
                    $("#historiaPaciente").text(data.cNroHistoriaClinica);
                    $("#fechaNacimiento").text(convertirFecha(data.dFechaNacimiento));
                    $("#edadPaciente").text(data.nEdad);
                    $("#emailPaciente").text(data.cEmail);
                    $("#nroTelefonoPaciente").text(data.cNroTelefono);
                    $("#idPaciente").text(data.cNroTelefono);
                }
            });
        }

        obtenerPaciente(numDoc);
        //--------------------------------------------- UTILS -----------------------------------------------

        function convertirFecha(date) {
            if (typeof date == "string")
                date = new Date(date);
            var day = (date.getDate() <= 9 ? "0" + date.getDate() : date.getDate());
            var month = (date.getMonth() + 1 <= 9 ? "0" + (date.getMonth() + 1) : (date.getMonth() + 1));
            var dateString = day + "/" + month + "/" + date.getFullYear();

            return dateString;
        }

    </script>
}
